   1              	 .syntax unified
   2              	 .cpu cortex-m4
   3              	 .eabi_attribute 27,3
   4              	 .fpu fpv4-sp-d16
   5              	 .eabi_attribute 20,1
   6              	 .eabi_attribute 21,1
   7              	 .eabi_attribute 23,3
   8              	 .eabi_attribute 24,1
   9              	 .eabi_attribute 25,1
  10              	 .eabi_attribute 26,1
  11              	 .eabi_attribute 30,6
  12              	 .eabi_attribute 34,1
  13              	 .eabi_attribute 18,4
  14              	 .thumb
  15              	 .file "accgyro_spi_icm20649.c"
  16              	 .text
  17              	.Ltext0:
  18              	 .cfi_sections .debug_frame
  19              	 .section .text.icm20649SpiInit,"ax",%progbits
  20              	 .align 2
  21              	 .thumb
  22              	 .thumb_func
  24              	icm20649SpiInit:
  25              	.LFB535:
  26              	 .file 1 "../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c"
   1:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** /*
   2:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****  * This file is part of Cleanflight and Betaflight.
   3:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****  *
   4:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****  * Cleanflight and Betaflight are free software. You can redistribute
   5:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****  * this software and/or modify this software under the terms of the
   6:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****  * GNU General Public License as published by the Free Software
   7:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****  * Foundation, either version 3 of the License, or (at your option)
   8:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****  * any later version.
   9:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****  *
  10:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****  * Cleanflight and Betaflight are distributed in the hope that they
  11:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****  * will be useful, but WITHOUT ANY WARRANTY; without even the implied
  12:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****  * warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
  13:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****  * See the GNU General Public License for more details.
  14:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****  *
  15:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****  * You should have received a copy of the GNU General Public License
  16:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****  * along with this software.
  17:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****  *
  18:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****  * If not, see <http://www.gnu.org/licenses/>.
  19:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****  */
  20:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
  21:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** #include <stdbool.h>
  22:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** #include <stdint.h>
  23:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** #include <stdlib.h>
  24:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
  25:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** #include "platform.h"
  26:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
  27:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** #include "common/axis.h"
  28:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** #include "common/maths.h"
  29:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
  30:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** #include "drivers/accgyro/accgyro.h"
  31:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** #include "drivers/accgyro/accgyro_mpu.h"
  32:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** #include "drivers/accgyro/accgyro_spi_icm20649.h"
  33:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** #include "drivers/bus_spi.h"
  34:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** #include "drivers/exti.h"
  35:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** #include "drivers/io.h"
  36:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** #include "drivers/sensor.h"
  37:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** #include "drivers/time.h"
  38:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
  39:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
  40:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** static void icm20649SpiInit(const busDevice_t *bus)
  41:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** {
  27              	 .loc 1 41 0
  28              	 .cfi_startproc
  29              	 
  30              	 
  31 0000 80B5     	 push {r7,lr}
  32              	.LCFI0:
  33              	 .cfi_def_cfa_offset 8
  34              	 .cfi_offset 7,-8
  35              	 .cfi_offset 14,-4
  36 0002 82B0     	 sub sp,sp,#8
  37              	.LCFI1:
  38              	 .cfi_def_cfa_offset 16
  39 0004 00AF     	 add r7,sp,#0
  40              	.LCFI2:
  41              	 .cfi_def_cfa_register 7
  42 0006 7860     	 str r0,[r7,#4]
  42:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     static bool hardwareInitialised = false;
  43:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
  44:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     if (hardwareInitialised) {
  43              	 .loc 1 44 0
  44 0008 134B     	 ldr r3,.L4
  45 000a 1B78     	 ldrb r3,[r3]
  46 000c 002B     	 cmp r3,#0
  47 000e 00D0     	 beq .L2
  45:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****         return;
  48              	 .loc 1 45 0
  49 0010 1EE0     	 b .L1
  50              	.L2:
  46:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     }
  47:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
  48:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** #ifndef USE_DUAL_GYRO
  49:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     IOInit(bus->busdev_u.spi.csnPin, OWNER_MPU_CS, 0);
  51              	 .loc 1 49 0
  52 0012 7B68     	 ldr r3,[r7,#4]
  53 0014 D3F80530 	 ldr r3,[r3,#5]
  54 0018 1846     	 mov r0,r3
  55 001a 1C21     	 movs r1,#28
  56 001c 0022     	 movs r2,#0
  57 001e FFF7FEFF 	 bl IOInit
  50:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     IOConfigGPIO(bus->busdev_u.spi.csnPin, SPI_IO_CS_CFG);
  58              	 .loc 1 50 0
  59 0022 7B68     	 ldr r3,[r7,#4]
  60 0024 D3F80530 	 ldr r3,[r3,#5]
  61 0028 1846     	 mov r0,r3
  62 002a 8121     	 movs r1,#129
  63 002c FFF7FEFF 	 bl IOConfigGPIO
  51:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     IOHi(bus->busdev_u.spi.csnPin);
  64              	 .loc 1 51 0
  65 0030 7B68     	 ldr r3,[r7,#4]
  66 0032 D3F80530 	 ldr r3,[r3,#5]
  67 0036 1846     	 mov r0,r3
  68 0038 FFF7FEFF 	 bl IOHi
  52:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** #endif
  53:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
  54:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     // all registers can be read/written at full speed (7MHz +-10%)
  55:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     // TODO verify that this works at 9MHz and 10MHz on non F7
  56:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     spiSetDivisor(bus->busdev_u.spi.instance, SPI_CLOCK_STANDARD);
  69              	 .loc 1 56 0
  70 003c 7B68     	 ldr r3,[r7,#4]
  71 003e D3F80130 	 ldr r3,[r3,#1]
  72 0042 1846     	 mov r0,r3
  73 0044 0421     	 movs r1,#4
  74 0046 FFF7FEFF 	 bl spiSetDivisor
  57:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
  58:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     hardwareInitialised = true;
  75              	 .loc 1 58 0
  76 004a 034B     	 ldr r3,.L4
  77 004c 0122     	 movs r2,#1
  78 004e 1A70     	 strb r2,[r3]
  79              	.L1:
  59:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** }
  80              	 .loc 1 59 0
  81 0050 0837     	 adds r7,r7,#8
  82              	.LCFI3:
  83              	 .cfi_def_cfa_offset 8
  84 0052 BD46     	 mov sp,r7
  85              	.LCFI4:
  86              	 .cfi_def_cfa_register 13
  87              	 
  88 0054 80BD     	 pop {r7,pc}
  89              	.L5:
  90 0056 00BF     	 .align 2
  91              	.L4:
  92 0058 00000000 	 .word hardwareInitialised.12659
  93              	 .cfi_endproc
  94              	.LFE535:
  96              	 .section .text.icm20649SpiDetect,"ax",%progbits
  97              	 .align 2
  98              	 .global icm20649SpiDetect
  99              	 .thumb
 100              	 .thumb_func
 102              	icm20649SpiDetect:
 103              	.LFB536:
  60:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
  61:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** uint8_t icm20649SpiDetect(const busDevice_t *bus)
  62:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** {
 104              	 .loc 1 62 0
 105              	 .cfi_startproc
 106              	 
 107              	 
 108 0000 80B5     	 push {r7,lr}
 109              	.LCFI5:
 110              	 .cfi_def_cfa_offset 8
 111              	 .cfi_offset 7,-8
 112              	 .cfi_offset 14,-4
 113 0002 84B0     	 sub sp,sp,#16
 114              	.LCFI6:
 115              	 .cfi_def_cfa_offset 24
 116 0004 00AF     	 add r7,sp,#0
 117              	.LCFI7:
 118              	 .cfi_def_cfa_register 7
 119 0006 7860     	 str r0,[r7,#4]
  63:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     icm20649SpiInit(bus);
 120              	 .loc 1 63 0
 121 0008 7868     	 ldr r0,[r7,#4]
 122 000a FFF7FEFF 	 bl icm20649SpiInit
  64:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
  65:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     spiSetDivisor(bus->busdev_u.spi.instance, SPI_CLOCK_STANDARD);
 123              	 .loc 1 65 0
 124 000e 7B68     	 ldr r3,[r7,#4]
 125 0010 D3F80130 	 ldr r3,[r3,#1]
 126 0014 1846     	 mov r0,r3
 127 0016 0421     	 movs r1,#4
 128 0018 FFF7FEFF 	 bl spiSetDivisor
  66:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
  67:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     spiBusWriteRegister(bus, ICM20649_RA_REG_BANK_SEL, 0 << 4); // select bank 0 just to be safe
 129              	 .loc 1 67 0
 130 001c 7868     	 ldr r0,[r7,#4]
 131 001e 7F21     	 movs r1,#127
 132 0020 0022     	 movs r2,#0
 133 0022 FFF7FEFF 	 bl spiBusWriteRegister
  68:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     delay(15);
 134              	 .loc 1 68 0
 135 0026 0F20     	 movs r0,#15
 136 0028 FFF7FEFF 	 bl delay
  69:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
  70:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     spiBusWriteRegister(bus, ICM20649_RA_PWR_MGMT_1, ICM20649_BIT_RESET);
 137              	 .loc 1 70 0
 138 002c 7868     	 ldr r0,[r7,#4]
 139 002e 0621     	 movs r1,#6
 140 0030 8022     	 movs r2,#128
 141 0032 FFF7FEFF 	 bl spiBusWriteRegister
  71:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
  72:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     uint8_t icmDetected = MPU_NONE;
 142              	 .loc 1 72 0
 143 0036 0023     	 movs r3,#0
 144 0038 FB73     	 strb r3,[r7,#15]
  73:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     uint8_t attemptsRemaining = 20;
 145              	 .loc 1 73 0
 146 003a 1423     	 movs r3,#20
 147 003c BB73     	 strb r3,[r7,#14]
 148              	.L13:
 149              	.LBB2:
  74:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     do {
  75:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****         delay(150);
 150              	 .loc 1 75 0
 151 003e 9620     	 movs r0,#150
 152 0040 FFF7FEFF 	 bl delay
  76:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****         const uint8_t whoAmI = spiBusReadRegister(bus, ICM20649_RA_WHO_AM_I);
 153              	 .loc 1 76 0
 154 0044 7868     	 ldr r0,[r7,#4]
 155 0046 0021     	 movs r1,#0
 156 0048 FFF7FEFF 	 bl spiBusReadRegister
 157 004c 0346     	 mov r3,r0
 158 004e 7B73     	 strb r3,[r7,#13]
  77:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****         if (whoAmI == ICM20649_WHO_AM_I_CONST) {
 159              	 .loc 1 77 0
 160 0050 7B7B     	 ldrb r3,[r7,#13]
 161 0052 E12B     	 cmp r3,#225
 162 0054 02D1     	 bne .L7
  78:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****             icmDetected = ICM_20649_SPI;
 163              	 .loc 1 78 0
 164 0056 0A23     	 movs r3,#10
 165 0058 FB73     	 strb r3,[r7,#15]
 166 005a 01E0     	 b .L8
 167              	.L7:
  79:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****         } else {
  80:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****             icmDetected = MPU_NONE;
 168              	 .loc 1 80 0
 169 005c 0023     	 movs r3,#0
 170 005e FB73     	 strb r3,[r7,#15]
 171              	.L8:
  81:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****         }
  82:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****         if (icmDetected != MPU_NONE) {
 172              	 .loc 1 82 0
 173 0060 FB7B     	 ldrb r3,[r7,#15]
 174 0062 002B     	 cmp r3,#0
 175 0064 00D0     	 beq .L9
  83:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****             break;
 176              	 .loc 1 83 0
 177 0066 09E0     	 b .L10
 178              	.L9:
  84:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****         }
  85:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****         if (!attemptsRemaining) {
 179              	 .loc 1 85 0
 180 0068 BB7B     	 ldrb r3,[r7,#14]
 181 006a 002B     	 cmp r3,#0
 182 006c 01D1     	 bne .L11
  86:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****             return MPU_NONE;
 183              	 .loc 1 86 0
 184 006e 0023     	 movs r3,#0
 185 0070 05E0     	 b .L12
 186              	.L11:
 187              	.LBE2:
  87:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****         }
  88:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     } while (attemptsRemaining--);
 188              	 .loc 1 88 0
 189 0072 BB7B     	 ldrb r3,[r7,#14]
 190 0074 5A1E     	 subs r2,r3,#1
 191 0076 BA73     	 strb r2,[r7,#14]
 192 0078 002B     	 cmp r3,#0
 193 007a E0D1     	 bne .L13
 194              	.L10:
  89:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
  90:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     return icmDetected;
 195              	 .loc 1 90 0
 196 007c FB7B     	 ldrb r3,[r7,#15]
 197              	.L12:
  91:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
  92:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** }
 198              	 .loc 1 92 0
 199 007e 1846     	 mov r0,r3
 200 0080 1037     	 adds r7,r7,#16
 201              	.LCFI8:
 202              	 .cfi_def_cfa_offset 8
 203 0082 BD46     	 mov sp,r7
 204              	.LCFI9:
 205              	 .cfi_def_cfa_register 13
 206              	 
 207 0084 80BD     	 pop {r7,pc}
 208              	 .cfi_endproc
 209              	.LFE536:
 211 0086 00BF     	 .section .text.icm20649AccInit,"ax",%progbits
 212              	 .align 2
 213              	 .global icm20649AccInit
 214              	 .thumb
 215              	 .thumb_func
 217              	icm20649AccInit:
 218              	.LFB537:
  93:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
  94:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** void icm20649AccInit(accDev_t *acc)
  95:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** {
 219              	 .loc 1 95 0
 220              	 .cfi_startproc
 221              	 
 222              	 
 223 0000 80B5     	 push {r7,lr}
 224              	.LCFI10:
 225              	 .cfi_def_cfa_offset 8
 226              	 .cfi_offset 7,-8
 227              	 .cfi_offset 14,-4
 228 0002 84B0     	 sub sp,sp,#16
 229              	.LCFI11:
 230              	 .cfi_def_cfa_offset 24
 231 0004 00AF     	 add r7,sp,#0
 232              	.LCFI12:
 233              	 .cfi_def_cfa_register 7
 234 0006 7860     	 str r0,[r7,#4]
  96:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     // 2,048 LSB/g 16g
  97:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     // 1,024 LSB/g 30g
  98:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     acc->acc_1G = acc->acc_high_fsr ? 1024 : 2048;
 235              	 .loc 1 98 0
 236 0008 7B68     	 ldr r3,[r7,#4]
 237 000a 5B7F     	 ldrb r3,[r3,#29]
 238 000c 002B     	 cmp r3,#0
 239 000e 02D0     	 beq .L15
 240              	 .loc 1 98 0 is_stmt 0 discriminator 1
 241 0010 4FF48062 	 mov r2,#1024
 242 0014 01E0     	 b .L16
 243              	.L15:
 244              	 .loc 1 98 0 discriminator 2
 245 0016 4FF40062 	 mov r2,#2048
 246              	.L16:
 247              	 .loc 1 98 0 discriminator 4
 248 001a 7B68     	 ldr r3,[r7,#4]
 249 001c A3F81120 	 strh r2,[r3,#17]
  99:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
 100:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     spiSetDivisor(acc->bus.busdev_u.spi.instance, SPI_CLOCK_STANDARD);
 250              	 .loc 1 100 0 is_stmt 1 discriminator 4
 251 0020 7B68     	 ldr r3,[r7,#4]
 252 0022 D3F80930 	 ldr r3,[r3,#9]
 253 0026 1846     	 mov r0,r3
 254 0028 0421     	 movs r1,#4
 255 002a FFF7FEFF 	 bl spiSetDivisor
 101:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
 102:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     spiBusWriteRegister(&acc->bus, ICM20649_RA_REG_BANK_SEL, 2 << 4); // config in bank 2
 256              	 .loc 1 102 0 discriminator 4
 257 002e 7B68     	 ldr r3,[r7,#4]
 258 0030 0833     	 adds r3,r3,#8
 259 0032 1846     	 mov r0,r3
 260 0034 7F21     	 movs r1,#127
 261 0036 2022     	 movs r2,#32
 262 0038 FFF7FEFF 	 bl spiBusWriteRegister
 103:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     delay(15);
 263              	 .loc 1 103 0 discriminator 4
 264 003c 0F20     	 movs r0,#15
 265 003e FFF7FEFF 	 bl delay
 104:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     const uint8_t acc_fsr = acc->acc_high_fsr ? ICM20649_FSR_30G : ICM20649_FSR_16G;
 266              	 .loc 1 104 0 discriminator 4
 267 0042 7B68     	 ldr r3,[r7,#4]
 268 0044 5B7F     	 ldrb r3,[r3,#29]
 269 0046 002B     	 cmp r3,#0
 270 0048 01D0     	 beq .L17
 271              	 .loc 1 104 0 is_stmt 0 discriminator 1
 272 004a 0323     	 movs r3,#3
 273 004c 00E0     	 b .L18
 274              	.L17:
 275              	 .loc 1 104 0 discriminator 2
 276 004e 0223     	 movs r3,#2
 277              	.L18:
 278              	 .loc 1 104 0 discriminator 4
 279 0050 FB73     	 strb r3,[r7,#15]
 105:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     spiBusWriteRegister(&acc->bus, ICM20649_RA_ACCEL_CONFIG, acc_fsr << 1);
 280              	 .loc 1 105 0 is_stmt 1 discriminator 4
 281 0052 7B68     	 ldr r3,[r7,#4]
 282 0054 03F10802 	 add r2,r3,#8
 283 0058 FB7B     	 ldrb r3,[r7,#15]
 284 005a 5B00     	 lsls r3,r3,#1
 285 005c DBB2     	 uxtb r3,r3
 286 005e 1046     	 mov r0,r2
 287 0060 1421     	 movs r1,#20
 288 0062 1A46     	 mov r2,r3
 289 0064 FFF7FEFF 	 bl spiBusWriteRegister
 106:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     delay(15);
 290              	 .loc 1 106 0 discriminator 4
 291 0068 0F20     	 movs r0,#15
 292 006a FFF7FEFF 	 bl delay
 107:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     spiBusWriteRegister(&acc->bus, ICM20649_RA_REG_BANK_SEL, 0 << 4); // back to bank 0
 293              	 .loc 1 107 0 discriminator 4
 294 006e 7B68     	 ldr r3,[r7,#4]
 295 0070 0833     	 adds r3,r3,#8
 296 0072 1846     	 mov r0,r3
 297 0074 7F21     	 movs r1,#127
 298 0076 0022     	 movs r2,#0
 299 0078 FFF7FEFF 	 bl spiBusWriteRegister
 108:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     delay(15);
 300              	 .loc 1 108 0 discriminator 4
 301 007c 0F20     	 movs r0,#15
 302 007e FFF7FEFF 	 bl delay
 109:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** }
 303              	 .loc 1 109 0 discriminator 4
 304 0082 1037     	 adds r7,r7,#16
 305              	.LCFI13:
 306              	 .cfi_def_cfa_offset 8
 307 0084 BD46     	 mov sp,r7
 308              	.LCFI14:
 309              	 .cfi_def_cfa_register 13
 310              	 
 311 0086 80BD     	 pop {r7,pc}
 312              	 .cfi_endproc
 313              	.LFE537:
 315              	 .section .text.icm20649SpiAccDetect,"ax",%progbits
 316              	 .align 2
 317              	 .global icm20649SpiAccDetect
 318              	 .thumb
 319              	 .thumb_func
 321              	icm20649SpiAccDetect:
 322              	.LFB538:
 110:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
 111:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** bool icm20649SpiAccDetect(accDev_t *acc)
 112:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** {
 323              	 .loc 1 112 0
 324              	 .cfi_startproc
 325              	 
 326              	 
 327              	 
 328 0000 80B4     	 push {r7}
 329              	.LCFI15:
 330              	 .cfi_def_cfa_offset 4
 331              	 .cfi_offset 7,-4
 332 0002 83B0     	 sub sp,sp,#12
 333              	.LCFI16:
 334              	 .cfi_def_cfa_offset 16
 335 0004 00AF     	 add r7,sp,#0
 336              	.LCFI17:
 337              	 .cfi_def_cfa_register 7
 338 0006 7860     	 str r0,[r7,#4]
 113:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     if (acc->mpuDetectionResult.sensor != ICM_20649_SPI) {
 339              	 .loc 1 113 0
 340 0008 7B68     	 ldr r3,[r7,#4]
 341 000a 5B7E     	 ldrb r3,[r3,#25]
 342 000c 0A2B     	 cmp r3,#10
 343 000e 01D0     	 beq .L20
 114:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****         return false;
 344              	 .loc 1 114 0
 345 0010 0023     	 movs r3,#0
 346 0012 06E0     	 b .L21
 347              	.L20:
 115:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     }
 116:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
 117:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     acc->initFn = icm20649AccInit;
 348              	 .loc 1 117 0
 349 0014 7B68     	 ldr r3,[r7,#4]
 350 0016 064A     	 ldr r2,.L22
 351 0018 1A60     	 str r2,[r3]
 118:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     acc->readFn = icm20649AccRead;
 352              	 .loc 1 118 0
 353 001a 7B68     	 ldr r3,[r7,#4]
 354 001c 054A     	 ldr r2,.L22+4
 355 001e 5A60     	 str r2,[r3,#4]
 119:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
 120:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     return true;
 356              	 .loc 1 120 0
 357 0020 0123     	 movs r3,#1
 358              	.L21:
 121:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** }
 359              	 .loc 1 121 0
 360 0022 1846     	 mov r0,r3
 361 0024 0C37     	 adds r7,r7,#12
 362              	.LCFI18:
 363              	 .cfi_def_cfa_offset 4
 364 0026 BD46     	 mov sp,r7
 365              	.LCFI19:
 366              	 .cfi_def_cfa_register 13
 367              	 
 368 0028 5DF8047B 	 ldr r7,[sp],#4
 369              	.LCFI20:
 370              	 .cfi_restore 7
 371              	 .cfi_def_cfa_offset 0
 372 002c 7047     	 bx lr
 373              	.L23:
 374 002e 00BF     	 .align 2
 375              	.L22:
 376 0030 00000000 	 .word icm20649AccInit
 377 0034 00000000 	 .word icm20649AccRead
 378              	 .cfi_endproc
 379              	.LFE538:
 381              	 .section .text.icm20649GyroInit,"ax",%progbits
 382              	 .align 2
 383              	 .global icm20649GyroInit
 384              	 .thumb
 385              	 .thumb_func
 387              	icm20649GyroInit:
 388              	.LFB539:
 122:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
 123:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
 124:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** void icm20649GyroInit(gyroDev_t *gyro)
 125:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** {
 389              	 .loc 1 125 0
 390              	 .cfi_startproc
 391              	 
 392              	 
 393 0000 80B5     	 push {r7,lr}
 394              	.LCFI21:
 395              	 .cfi_def_cfa_offset 8
 396              	 .cfi_offset 7,-8
 397              	 .cfi_offset 14,-4
 398 0002 84B0     	 sub sp,sp,#16
 399              	.LCFI22:
 400              	 .cfi_def_cfa_offset 24
 401 0004 00AF     	 add r7,sp,#0
 402              	.LCFI23:
 403              	 .cfi_def_cfa_register 7
 404 0006 7860     	 str r0,[r7,#4]
 126:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     mpuGyroInit(gyro);
 405              	 .loc 1 126 0
 406 0008 7868     	 ldr r0,[r7,#4]
 407 000a FFF7FEFF 	 bl mpuGyroInit
 127:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
 128:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     spiSetDivisor(gyro->bus.busdev_u.spi.instance, SPI_CLOCK_STANDARD); // ensure proper speed
 408              	 .loc 1 128 0
 409 000e 7B68     	 ldr r3,[r7,#4]
 410 0010 D3F81130 	 ldr r3,[r3,#17]
 411 0014 1846     	 mov r0,r3
 412 0016 0421     	 movs r1,#4
 413 0018 FFF7FEFF 	 bl spiSetDivisor
 129:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
 130:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     spiBusWriteRegister(&gyro->bus, ICM20649_RA_REG_BANK_SEL, 0 << 4); // select bank 0 just to be 
 414              	 .loc 1 130 0
 415 001c 7B68     	 ldr r3,[r7,#4]
 416 001e 1033     	 adds r3,r3,#16
 417 0020 1846     	 mov r0,r3
 418 0022 7F21     	 movs r1,#127
 419 0024 0022     	 movs r2,#0
 420 0026 FFF7FEFF 	 bl spiBusWriteRegister
 131:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     delay(15);
 421              	 .loc 1 131 0
 422 002a 0F20     	 movs r0,#15
 423 002c FFF7FEFF 	 bl delay
 132:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     spiBusWriteRegister(&gyro->bus, ICM20649_RA_PWR_MGMT_1, ICM20649_BIT_RESET);
 424              	 .loc 1 132 0
 425 0030 7B68     	 ldr r3,[r7,#4]
 426 0032 1033     	 adds r3,r3,#16
 427 0034 1846     	 mov r0,r3
 428 0036 0621     	 movs r1,#6
 429 0038 8022     	 movs r2,#128
 430 003a FFF7FEFF 	 bl spiBusWriteRegister
 133:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     delay(100);
 431              	 .loc 1 133 0
 432 003e 6420     	 movs r0,#100
 433 0040 FFF7FEFF 	 bl delay
 134:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     spiBusWriteRegister(&gyro->bus, ICM20649_RA_PWR_MGMT_1, INV_CLK_PLL);
 434              	 .loc 1 134 0
 435 0044 7B68     	 ldr r3,[r7,#4]
 436 0046 1033     	 adds r3,r3,#16
 437 0048 1846     	 mov r0,r3
 438 004a 0621     	 movs r1,#6
 439 004c 0122     	 movs r2,#1
 440 004e FFF7FEFF 	 bl spiBusWriteRegister
 135:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     delay(15);
 441              	 .loc 1 135 0
 442 0052 0F20     	 movs r0,#15
 443 0054 FFF7FEFF 	 bl delay
 136:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     spiBusWriteRegister(&gyro->bus, ICM20649_RA_REG_BANK_SEL, 2 << 4); // config in bank 2
 444              	 .loc 1 136 0
 445 0058 7B68     	 ldr r3,[r7,#4]
 446 005a 1033     	 adds r3,r3,#16
 447 005c 1846     	 mov r0,r3
 448 005e 7F21     	 movs r1,#127
 449 0060 2022     	 movs r2,#32
 450 0062 FFF7FEFF 	 bl spiBusWriteRegister
 137:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     delay(15);
 451              	 .loc 1 137 0
 452 0066 0F20     	 movs r0,#15
 453 0068 FFF7FEFF 	 bl delay
 138:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     const uint8_t gyro_fsr = gyro->gyro_high_fsr ? ICM20649_FSR_4000DPS : ICM20649_FSR_2000DPS;
 454              	 .loc 1 138 0
 455 006c 7B68     	 ldr r3,[r7,#4]
 456 006e 93F85E30 	 ldrb r3,[r3,#94]
 457 0072 002B     	 cmp r3,#0
 458 0074 01D0     	 beq .L25
 459              	 .loc 1 138 0 is_stmt 0 discriminator 1
 460 0076 0323     	 movs r3,#3
 461 0078 00E0     	 b .L26
 462              	.L25:
 463              	 .loc 1 138 0 discriminator 2
 464 007a 0223     	 movs r3,#2
 465              	.L26:
 466              	 .loc 1 138 0 discriminator 4
 467 007c FB73     	 strb r3,[r7,#15]
 139:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
 140:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     // If hardware_lpf is either GYRO_HARDWARE_LPF_NORMAL or GYRO_HARDWARE_LPF_EXPERIMENTAL then th
 141:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     // gyro is running in 9KHz sample mode and GYRO_FCHOICE should be 0, otherwise we're in 1.1KHz 
 142:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     // mode and GYRO_FCHOICE = 1.  When in 1.1KHz mode select the 196.6Hz DLPF (GYRO_DLPFCFG = 0)
 143:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     // Unfortunately we can't configure any difference in DLPF based on NORMAL vs. EXPERIMENTAL bec
 144:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     // the ICM20649 only has a single 9KHz DLPF cutoff.
 145:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     uint8_t raGyroConfigData = gyro->gyroRateKHz > GYRO_RATE_1100_Hz ? 0 : 1; // deactivate GYRO_FC
 468              	 .loc 1 145 0 is_stmt 1 discriminator 4
 469 007e 7B68     	 ldr r3,[r7,#4]
 470 0080 93F85C30 	 ldrb r3,[r3,#92]
 471 0084 012B     	 cmp r3,#1
 472 0086 94BF     	 ite ls
 473 0088 0123     	 movls r3,#1
 474 008a 0023     	 movhi r3,#0
 475 008c DBB2     	 uxtb r3,r3
 476 008e BB73     	 strb r3,[r7,#14]
 146:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     raGyroConfigData |= gyro_fsr << 1;
 477              	 .loc 1 146 0 discriminator 4
 478 0090 FB7B     	 ldrb r3,[r7,#15]
 479 0092 5B00     	 lsls r3,r3,#1
 480 0094 DAB2     	 uxtb r2,r3
 481 0096 BB7B     	 ldrb r3,[r7,#14]
 482 0098 1343     	 orrs r3,r3,r2
 483 009a DBB2     	 uxtb r3,r3
 484 009c BB73     	 strb r3,[r7,#14]
 147:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     spiBusWriteRegister(&gyro->bus, ICM20649_RA_GYRO_CONFIG_1, raGyroConfigData);
 485              	 .loc 1 147 0 discriminator 4
 486 009e 7B68     	 ldr r3,[r7,#4]
 487 00a0 03F11002 	 add r2,r3,#16
 488 00a4 BB7B     	 ldrb r3,[r7,#14]
 489 00a6 1046     	 mov r0,r2
 490 00a8 0121     	 movs r1,#1
 491 00aa 1A46     	 mov r2,r3
 492 00ac FFF7FEFF 	 bl spiBusWriteRegister
 148:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     delay(15);
 493              	 .loc 1 148 0 discriminator 4
 494 00b0 0F20     	 movs r0,#15
 495 00b2 FFF7FEFF 	 bl delay
 149:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     spiBusWriteRegister(&gyro->bus, ICM20649_RA_GYRO_SMPLRT_DIV, gyro->mpuDividerDrops); // Get Div
 496              	 .loc 1 149 0 discriminator 4
 497 00b6 7B68     	 ldr r3,[r7,#4]
 498 00b8 03F11002 	 add r2,r3,#16
 499 00bc 7B68     	 ldr r3,[r7,#4]
 500 00be 93F86130 	 ldrb r3,[r3,#97]
 501 00c2 1046     	 mov r0,r2
 502 00c4 0021     	 movs r1,#0
 503 00c6 1A46     	 mov r2,r3
 504 00c8 FFF7FEFF 	 bl spiBusWriteRegister
 150:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     delay(100);
 505              	 .loc 1 150 0 discriminator 4
 506 00cc 6420     	 movs r0,#100
 507 00ce FFF7FEFF 	 bl delay
 151:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
 152:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     // Data ready interrupt configuration
 153:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     // back to bank 0
 154:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     spiBusWriteRegister(&gyro->bus, ICM20649_RA_REG_BANK_SEL, 0 << 4);
 508              	 .loc 1 154 0 discriminator 4
 509 00d2 7B68     	 ldr r3,[r7,#4]
 510 00d4 1033     	 adds r3,r3,#16
 511 00d6 1846     	 mov r0,r3
 512 00d8 7F21     	 movs r1,#127
 513 00da 0022     	 movs r2,#0
 514 00dc FFF7FEFF 	 bl spiBusWriteRegister
 155:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     delay(15);
 515              	 .loc 1 155 0 discriminator 4
 516 00e0 0F20     	 movs r0,#15
 517 00e2 FFF7FEFF 	 bl delay
 156:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     spiBusWriteRegister(&gyro->bus, ICM20649_RA_INT_PIN_CFG, 0x11);  // INT_ANYRD_2CLEAR, BYPASS_EN
 518              	 .loc 1 156 0 discriminator 4
 519 00e6 7B68     	 ldr r3,[r7,#4]
 520 00e8 1033     	 adds r3,r3,#16
 521 00ea 1846     	 mov r0,r3
 522 00ec 0F21     	 movs r1,#15
 523 00ee 1122     	 movs r2,#17
 524 00f0 FFF7FEFF 	 bl spiBusWriteRegister
 157:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     delay(15);
 525              	 .loc 1 157 0 discriminator 4
 526 00f4 0F20     	 movs r0,#15
 527 00f6 FFF7FEFF 	 bl delay
 158:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
 159:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** #ifdef USE_MPU_DATA_READY_SIGNAL
 160:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     spiBusWriteRegister(&gyro->bus, ICM20649_RA_INT_ENABLE_1, 0x01);
 161:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** #endif
 162:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** }
 528              	 .loc 1 162 0 discriminator 4
 529 00fa 1037     	 adds r7,r7,#16
 530              	.LCFI24:
 531              	 .cfi_def_cfa_offset 8
 532 00fc BD46     	 mov sp,r7
 533              	.LCFI25:
 534              	 .cfi_def_cfa_register 13
 535              	 
 536 00fe 80BD     	 pop {r7,pc}
 537              	 .cfi_endproc
 538              	.LFE539:
 540              	 .section .text.icm20649SpiGyroDetect,"ax",%progbits
 541              	 .align 2
 542              	 .global icm20649SpiGyroDetect
 543              	 .thumb
 544              	 .thumb_func
 546              	icm20649SpiGyroDetect:
 547              	.LFB540:
 163:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
 164:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** bool icm20649SpiGyroDetect(gyroDev_t *gyro)
 165:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** {
 548              	 .loc 1 165 0
 549              	 .cfi_startproc
 550              	 
 551              	 
 552              	 
 553 0000 80B4     	 push {r7}
 554              	.LCFI26:
 555              	 .cfi_def_cfa_offset 4
 556              	 .cfi_offset 7,-4
 557 0002 83B0     	 sub sp,sp,#12
 558              	.LCFI27:
 559              	 .cfi_def_cfa_offset 16
 560 0004 00AF     	 add r7,sp,#0
 561              	.LCFI28:
 562              	 .cfi_def_cfa_register 7
 563 0006 7860     	 str r0,[r7,#4]
 166:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     if (gyro->mpuDetectionResult.sensor != ICM_20649_SPI)
 564              	 .loc 1 166 0
 565 0008 7B68     	 ldr r3,[r7,#4]
 566 000a 93F85930 	 ldrb r3,[r3,#89]
 567 000e 0A2B     	 cmp r3,#10
 568 0010 01D0     	 beq .L28
 167:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****         return false;
 569              	 .loc 1 167 0
 570 0012 0023     	 movs r3,#0
 571 0014 11E0     	 b .L29
 572              	.L28:
 168:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
 169:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     gyro->initFn = icm20649GyroInit;
 573              	 .loc 1 169 0
 574 0016 7B68     	 ldr r3,[r7,#4]
 575 0018 0B4A     	 ldr r2,.L32
 576 001a 1A60     	 str r2,[r3]
 170:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     gyro->readFn = icm20649GyroReadSPI;
 577              	 .loc 1 170 0
 578 001c 7B68     	 ldr r3,[r7,#4]
 579 001e 0B4A     	 ldr r2,.L32+4
 580 0020 5A60     	 str r2,[r3,#4]
 171:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
 172:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     // 16.4 dps/lsb 2kDps
 173:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     //  8.2 dps/lsb 4kDps
 174:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     gyro->scale = 1.0f / (gyro->gyro_high_fsr ? 8.2f : 16.4f);
 581              	 .loc 1 174 0
 582 0022 7B68     	 ldr r3,[r7,#4]
 583 0024 93F85E30 	 ldrb r3,[r3,#94]
 584 0028 002B     	 cmp r3,#0
 585 002a 01D0     	 beq .L30
 586              	 .loc 1 174 0 is_stmt 0 discriminator 1
 587 002c 084A     	 ldr r2,.L32+8
 588 002e 00E0     	 b .L31
 589              	.L30:
 590              	 .loc 1 174 0 discriminator 2
 591 0030 084A     	 ldr r2,.L32+12
 592              	.L31:
 593              	 .loc 1 174 0 discriminator 4
 594 0032 7B68     	 ldr r3,[r7,#4]
 595 0034 1933     	 adds r3,r3,#25
 596 0036 1A60     	 str r2,[r3]
 175:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
 176:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     return true;
 597              	 .loc 1 176 0 is_stmt 1 discriminator 4
 598 0038 0123     	 movs r3,#1
 599              	.L29:
 177:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** }
 600              	 .loc 1 177 0
 601 003a 1846     	 mov r0,r3
 602 003c 0C37     	 adds r7,r7,#12
 603              	.LCFI29:
 604              	 .cfi_def_cfa_offset 4
 605 003e BD46     	 mov sp,r7
 606              	.LCFI30:
 607              	 .cfi_def_cfa_register 13
 608              	 
 609 0040 5DF8047B 	 ldr r7,[sp],#4
 610              	.LCFI31:
 611              	 .cfi_restore 7
 612              	 .cfi_def_cfa_offset 0
 613 0044 7047     	 bx lr
 614              	.L33:
 615 0046 00BF     	 .align 2
 616              	.L32:
 617 0048 00000000 	 .word icm20649GyroInit
 618 004c 00000000 	 .word icm20649GyroReadSPI
 619 0050 90C1F93D 	 .word 1039778192
 620 0054 90C1793D 	 .word 1031389584
 621              	 .cfi_endproc
 622              	.LFE540:
 624              	 .section .text.icm20649GyroReadSPI,"ax",%progbits
 625              	 .align 2
 626              	 .global icm20649GyroReadSPI
 627              	 .thumb
 628              	 .thumb_func
 630              	icm20649GyroReadSPI:
 631              	.LFB541:
 178:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
 179:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** bool icm20649GyroReadSPI(gyroDev_t *gyro)
 180:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** {
 632              	 .loc 1 180 0
 633              	 .cfi_startproc
 634              	 
 635              	 
 636 0000 80B5     	 push {r7,lr}
 637              	.LCFI32:
 638              	 .cfi_def_cfa_offset 8
 639              	 .cfi_offset 7,-8
 640              	 .cfi_offset 14,-4
 641 0002 84B0     	 sub sp,sp,#16
 642              	.LCFI33:
 643              	 .cfi_def_cfa_offset 24
 644 0004 00AF     	 add r7,sp,#0
 645              	.LCFI34:
 646              	 .cfi_def_cfa_register 7
 647 0006 7860     	 str r0,[r7,#4]
 181:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     static const uint8_t dataToSend[7] = {ICM20649_RA_GYRO_XOUT_H | 0x80, 0xFF, 0xFF, 0xFF, 0xFF, 0
 182:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     uint8_t data[7];
 183:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
 184:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     const bool ack = spiBusTransfer(&gyro->bus, dataToSend, data, 7);
 648              	 .loc 1 184 0
 649 0008 7B68     	 ldr r3,[r7,#4]
 650 000a 03F11002 	 add r2,r3,#16
 651 000e 07F10803 	 add r3,r7,#8
 652 0012 1046     	 mov r0,r2
 653 0014 1849     	 ldr r1,.L38
 654 0016 1A46     	 mov r2,r3
 655 0018 0723     	 movs r3,#7
 656 001a FFF7FEFF 	 bl spiBusTransfer
 657 001e 0346     	 mov r3,r0
 658 0020 FB73     	 strb r3,[r7,#15]
 185:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     if (!ack) {
 659              	 .loc 1 185 0
 660 0022 FB7B     	 ldrb r3,[r7,#15]
 661 0024 83F00103 	 eor r3,r3,#1
 662 0028 DBB2     	 uxtb r3,r3
 663 002a 002B     	 cmp r3,#0
 664 002c 01D0     	 beq .L35
 186:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****         return false;
 665              	 .loc 1 186 0
 666 002e 0023     	 movs r3,#0
 667 0030 1EE0     	 b .L37
 668              	.L35:
 187:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     }
 188:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
 189:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     gyro->gyroADCRaw[X] = (int16_t)((data[1] << 8) | data[2]);
 669              	 .loc 1 189 0
 670 0032 7B7A     	 ldrb r3,[r7,#9]
 671 0034 1B02     	 lsls r3,r3,#8
 672 0036 9AB2     	 uxth r2,r3
 673 0038 BB7A     	 ldrb r3,[r7,#10]
 674 003a 9BB2     	 uxth r3,r3
 675 003c 1343     	 orrs r3,r3,r2
 676 003e 9AB2     	 uxth r2,r3
 677 0040 7B68     	 ldr r3,[r7,#4]
 678 0042 A3F84D20 	 strh r2,[r3,#77]
 190:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     gyro->gyroADCRaw[Y] = (int16_t)((data[3] << 8) | data[4]);
 679              	 .loc 1 190 0
 680 0046 FB7A     	 ldrb r3,[r7,#11]
 681 0048 1B02     	 lsls r3,r3,#8
 682 004a 9AB2     	 uxth r2,r3
 683 004c 3B7B     	 ldrb r3,[r7,#12]
 684 004e 9BB2     	 uxth r3,r3
 685 0050 1343     	 orrs r3,r3,r2
 686 0052 9AB2     	 uxth r2,r3
 687 0054 7B68     	 ldr r3,[r7,#4]
 688 0056 A3F84F20 	 strh r2,[r3,#79]
 191:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     gyro->gyroADCRaw[Z] = (int16_t)((data[5] << 8) | data[6]);
 689              	 .loc 1 191 0
 690 005a 7B7B     	 ldrb r3,[r7,#13]
 691 005c 1B02     	 lsls r3,r3,#8
 692 005e 9AB2     	 uxth r2,r3
 693 0060 BB7B     	 ldrb r3,[r7,#14]
 694 0062 9BB2     	 uxth r3,r3
 695 0064 1343     	 orrs r3,r3,r2
 696 0066 9AB2     	 uxth r2,r3
 697 0068 7B68     	 ldr r3,[r7,#4]
 698 006a A3F85120 	 strh r2,[r3,#81]
 192:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
 193:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     return true;
 699              	 .loc 1 193 0
 700 006e 0123     	 movs r3,#1
 701              	.L37:
 194:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** }
 702              	 .loc 1 194 0 discriminator 1
 703 0070 1846     	 mov r0,r3
 704 0072 1037     	 adds r7,r7,#16
 705              	.LCFI35:
 706              	 .cfi_def_cfa_offset 8
 707 0074 BD46     	 mov sp,r7
 708              	.LCFI36:
 709              	 .cfi_def_cfa_register 13
 710              	 
 711 0076 80BD     	 pop {r7,pc}
 712              	.L39:
 713              	 .align 2
 714              	.L38:
 715 0078 00000000 	 .word dataToSend.12686
 716              	 .cfi_endproc
 717              	.LFE541:
 719              	 .section .text.icm20649AccRead,"ax",%progbits
 720              	 .align 2
 721              	 .global icm20649AccRead
 722              	 .thumb
 723              	 .thumb_func
 725              	icm20649AccRead:
 726              	.LFB542:
 195:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
 196:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** bool icm20649AccRead(accDev_t *acc)
 197:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** {
 727              	 .loc 1 197 0
 728              	 .cfi_startproc
 729              	 
 730              	 
 731 0000 80B5     	 push {r7,lr}
 732              	.LCFI37:
 733              	 .cfi_def_cfa_offset 8
 734              	 .cfi_offset 7,-8
 735              	 .cfi_offset 14,-4
 736 0002 84B0     	 sub sp,sp,#16
 737              	.LCFI38:
 738              	 .cfi_def_cfa_offset 24
 739 0004 00AF     	 add r7,sp,#0
 740              	.LCFI39:
 741              	 .cfi_def_cfa_register 7
 742 0006 7860     	 str r0,[r7,#4]
 198:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     uint8_t data[6];
 199:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
 200:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     const bool ack = spiBusReadRegisterBuffer(&acc->bus, ICM20649_RA_ACCEL_XOUT_H, data, 6);
 743              	 .loc 1 200 0
 744 0008 7B68     	 ldr r3,[r7,#4]
 745 000a 03F10802 	 add r2,r3,#8
 746 000e 07F10803 	 add r3,r7,#8
 747 0012 1046     	 mov r0,r2
 748 0014 2D21     	 movs r1,#45
 749 0016 1A46     	 mov r2,r3
 750 0018 0623     	 movs r3,#6
 751 001a FFF7FEFF 	 bl spiBusReadRegisterBuffer
 752 001e 0346     	 mov r3,r0
 753 0020 FB73     	 strb r3,[r7,#15]
 201:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     if (!ack) {
 754              	 .loc 1 201 0
 755 0022 FB7B     	 ldrb r3,[r7,#15]
 756 0024 83F00103 	 eor r3,r3,#1
 757 0028 DBB2     	 uxtb r3,r3
 758 002a 002B     	 cmp r3,#0
 759 002c 01D0     	 beq .L41
 202:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****         return false;
 760              	 .loc 1 202 0
 761 002e 0023     	 movs r3,#0
 762 0030 1EE0     	 b .L43
 763              	.L41:
 203:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     }
 204:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
 205:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     acc->ADCRaw[X] = (int16_t)((data[0] << 8) | data[1]);
 764              	 .loc 1 205 0
 765 0032 3B7A     	 ldrb r3,[r7,#8]
 766 0034 1B02     	 lsls r3,r3,#8
 767 0036 9AB2     	 uxth r2,r3
 768 0038 7B7A     	 ldrb r3,[r7,#9]
 769 003a 9BB2     	 uxth r3,r3
 770 003c 1343     	 orrs r3,r3,r2
 771 003e 9AB2     	 uxth r2,r3
 772 0040 7B68     	 ldr r3,[r7,#4]
 773 0042 A3F81320 	 strh r2,[r3,#19]
 206:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     acc->ADCRaw[Y] = (int16_t)((data[2] << 8) | data[3]);
 774              	 .loc 1 206 0
 775 0046 BB7A     	 ldrb r3,[r7,#10]
 776 0048 1B02     	 lsls r3,r3,#8
 777 004a 9AB2     	 uxth r2,r3
 778 004c FB7A     	 ldrb r3,[r7,#11]
 779 004e 9BB2     	 uxth r3,r3
 780 0050 1343     	 orrs r3,r3,r2
 781 0052 9AB2     	 uxth r2,r3
 782 0054 7B68     	 ldr r3,[r7,#4]
 783 0056 A3F81520 	 strh r2,[r3,#21]
 207:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     acc->ADCRaw[Z] = (int16_t)((data[4] << 8) | data[5]);
 784              	 .loc 1 207 0
 785 005a 3B7B     	 ldrb r3,[r7,#12]
 786 005c 1B02     	 lsls r3,r3,#8
 787 005e 9AB2     	 uxth r2,r3
 788 0060 7B7B     	 ldrb r3,[r7,#13]
 789 0062 9BB2     	 uxth r3,r3
 790 0064 1343     	 orrs r3,r3,r2
 791 0066 9AB2     	 uxth r2,r3
 792 0068 7B68     	 ldr r3,[r7,#4]
 793 006a A3F81720 	 strh r2,[r3,#23]
 208:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** 
 209:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c ****     return true;
 794              	 .loc 1 209 0
 795 006e 0123     	 movs r3,#1
 796              	.L43:
 210:../cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.c **** }
 797              	 .loc 1 210 0 discriminator 1
 798 0070 1846     	 mov r0,r3
 799 0072 1037     	 adds r7,r7,#16
 800              	.LCFI40:
 801              	 .cfi_def_cfa_offset 8
 802 0074 BD46     	 mov sp,r7
 803              	.LCFI41:
 804              	 .cfi_def_cfa_register 13
 805              	 
 806 0076 80BD     	 pop {r7,pc}
 807              	 .cfi_endproc
 808              	.LFE542:
 810              	 .section .bss.hardwareInitialised.12659,"aw",%nobits
 813              	hardwareInitialised.12659:
 814 0000 00       	 .space 1
 815              	 .section .rodata.dataToSend.12686,"a",%progbits
 816              	 .align 2
 819              	dataToSend.12686:
 820 0000 B3       	 .byte -77
 821 0001 FF       	 .byte -1
 822 0002 FF       	 .byte -1
 823 0003 FF       	 .byte -1
 824 0004 FF       	 .byte -1
 825 0005 FF       	 .byte -1
 826 0006 FF       	 .byte -1
 827 0007 00       	 .text
 828              	.Letext0:
 829              	 .file 2 "d:\\xmc\\dave-ide-4.4.2-64bit\\eclipse\\arm-gcc-49\\arm-none-eabi\\include\\machine\\_default_types.h"
 830              	 .file 3 "d:\\xmc\\dave-ide-4.4.2-64bit\\eclipse\\arm-gcc-49\\arm-none-eabi\\include\\stdint.h"
 831              	 .file 4 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/lib/main/XMC4000/xmc4700.h"
 832              	 .file 5 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/src/main/platform.h"
 833              	 .file 6 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/src/main/drivers/io_types.h"
 834              	 .file 7 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/src/main/drivers/exti.h"
 835              	 .file 8 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/lib/main/XMC4000/XMCLib/inc/xmc4_gpio.h"
 836              	 .file 9 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/src/main/drivers/bus_i2c.h"
 837              	 .file 10 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/src/main/common/axis.h"
 838              	 .file 11 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/src/main/drivers/bus.h"
 839              	 .file 12 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/src/main/drivers/sensor.h"
 840              	 .file 13 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/src/main/drivers/accgyro/accgyro.h"
 841              	 .file 14 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/src/main/drivers/accgyro/accgyro_mpu.h"
 842              	 .file 15 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/src/main/common/time.h"
 843              	 .file 16 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/src/main/sensors/gyro.h"
 844              	 .file 17 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/src/main/drivers/accgyro/accgyro_spi_icm20649.h"
 845              	 .file 18 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/src/main/drivers/bus_spi.h"
 846              	 .file 19 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/src/main/drivers/resource.h"
 847              	 .file 20 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/lib/main/CMSIS/Core/Include/core_cm4.h"
 848              	 .file 21 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/lib/main/XMC4000/system_XMC4700.h"
DEFINED SYMBOLS
                            *ABS*:00000000 accgyro_spi_icm20649.c
    {standard input}:20     .text.icm20649SpiInit:00000000 $t
    {standard input}:24     .text.icm20649SpiInit:00000000 icm20649SpiInit
    {standard input}:92     .text.icm20649SpiInit:00000058 $d
    {standard input}:813    .bss.hardwareInitialised.12659:00000000 hardwareInitialised.12659
    {standard input}:97     .text.icm20649SpiDetect:00000000 $t
    {standard input}:102    .text.icm20649SpiDetect:00000000 icm20649SpiDetect
    {standard input}:212    .text.icm20649AccInit:00000000 $t
    {standard input}:217    .text.icm20649AccInit:00000000 icm20649AccInit
    {standard input}:316    .text.icm20649SpiAccDetect:00000000 $t
    {standard input}:321    .text.icm20649SpiAccDetect:00000000 icm20649SpiAccDetect
    {standard input}:376    .text.icm20649SpiAccDetect:00000030 $d
    {standard input}:725    .text.icm20649AccRead:00000000 icm20649AccRead
    {standard input}:382    .text.icm20649GyroInit:00000000 $t
    {standard input}:387    .text.icm20649GyroInit:00000000 icm20649GyroInit
    {standard input}:541    .text.icm20649SpiGyroDetect:00000000 $t
    {standard input}:546    .text.icm20649SpiGyroDetect:00000000 icm20649SpiGyroDetect
    {standard input}:617    .text.icm20649SpiGyroDetect:00000048 $d
    {standard input}:630    .text.icm20649GyroReadSPI:00000000 icm20649GyroReadSPI
    {standard input}:625    .text.icm20649GyroReadSPI:00000000 $t
    {standard input}:715    .text.icm20649GyroReadSPI:00000078 $d
    {standard input}:819    .rodata.dataToSend.12686:00000000 dataToSend.12686
    {standard input}:720    .text.icm20649AccRead:00000000 $t
    {standard input}:814    .bss.hardwareInitialised.12659:00000000 $d
    {standard input}:816    .rodata.dataToSend.12686:00000000 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
IOInit
IOConfigGPIO
IOHi
spiSetDivisor
spiBusWriteRegister
delay
spiBusReadRegister
mpuGyroInit
spiBusTransfer
spiBusReadRegisterBuffer
