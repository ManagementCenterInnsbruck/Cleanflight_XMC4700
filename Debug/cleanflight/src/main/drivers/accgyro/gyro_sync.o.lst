   1              	 .syntax unified
   2              	 .cpu cortex-m4
   3              	 .eabi_attribute 27,3
   4              	 .fpu fpv4-sp-d16
   5              	 .eabi_attribute 20,1
   6              	 .eabi_attribute 21,1
   7              	 .eabi_attribute 23,3
   8              	 .eabi_attribute 24,1
   9              	 .eabi_attribute 25,1
  10              	 .eabi_attribute 26,1
  11              	 .eabi_attribute 30,6
  12              	 .eabi_attribute 34,1
  13              	 .eabi_attribute 18,4
  14              	 .thumb
  15              	 .file "gyro_sync.c"
  16              	 .text
  17              	.Ltext0:
  18              	 .cfi_sections .debug_frame
  19              	 .section .text.gyroSyncCheckUpdate,"ax",%progbits
  20              	 .align 2
  21              	 .global gyroSyncCheckUpdate
  22              	 .thumb
  23              	 .thumb_func
  25              	gyroSyncCheckUpdate:
  26              	.LFB533:
  27              	 .file 1 "../cleanflight/src/main/drivers/accgyro/gyro_sync.c"
   1:../cleanflight/src/main/drivers/accgyro/gyro_sync.c **** /*
   2:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****  * This file is part of Cleanflight and Betaflight.
   3:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****  *
   4:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****  * Cleanflight and Betaflight are free software. You can redistribute
   5:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****  * this software and/or modify this software under the terms of the
   6:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****  * GNU General Public License as published by the Free Software
   7:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****  * Foundation, either version 3 of the License, or (at your option)
   8:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****  * any later version.
   9:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****  *
  10:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****  * Cleanflight and Betaflight are distributed in the hope that they
  11:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****  * will be useful, but WITHOUT ANY WARRANTY; without even the implied
  12:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****  * warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
  13:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****  * See the GNU General Public License for more details.
  14:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****  *
  15:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****  * You should have received a copy of the GNU General Public License
  16:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****  * along with this software.
  17:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****  *
  18:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****  * If not, see <http://www.gnu.org/licenses/>.
  19:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****  */
  20:../cleanflight/src/main/drivers/accgyro/gyro_sync.c **** 
  21:../cleanflight/src/main/drivers/accgyro/gyro_sync.c **** /*
  22:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****  * gyro_sync.c
  23:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****  *
  24:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****  *  Created on: 3 aug. 2015
  25:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****  *      Author: borisb
  26:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****  */
  27:../cleanflight/src/main/drivers/accgyro/gyro_sync.c **** 
  28:../cleanflight/src/main/drivers/accgyro/gyro_sync.c **** #include <stdbool.h>
  29:../cleanflight/src/main/drivers/accgyro/gyro_sync.c **** #include <stdint.h>
  30:../cleanflight/src/main/drivers/accgyro/gyro_sync.c **** 
  31:../cleanflight/src/main/drivers/accgyro/gyro_sync.c **** #include "platform.h"
  32:../cleanflight/src/main/drivers/accgyro/gyro_sync.c **** 
  33:../cleanflight/src/main/drivers/accgyro/gyro_sync.c **** #include "drivers/sensor.h"
  34:../cleanflight/src/main/drivers/accgyro/gyro_sync.c **** #include "drivers/accgyro/accgyro.h"
  35:../cleanflight/src/main/drivers/accgyro/gyro_sync.c **** #include "drivers/accgyro/gyro_sync.h"
  36:../cleanflight/src/main/drivers/accgyro/gyro_sync.c **** 
  37:../cleanflight/src/main/drivers/accgyro/gyro_sync.c **** 
  38:../cleanflight/src/main/drivers/accgyro/gyro_sync.c **** bool gyroSyncCheckUpdate(gyroDev_t *gyro)
  39:../cleanflight/src/main/drivers/accgyro/gyro_sync.c **** {
  28              	 .loc 1 39 0
  29              	 .cfi_startproc
  30              	 
  31              	 
  32              	 
  33 0000 80B4     	 push {r7}
  34              	.LCFI0:
  35              	 .cfi_def_cfa_offset 4
  36              	 .cfi_offset 7,-4
  37 0002 85B0     	 sub sp,sp,#20
  38              	.LCFI1:
  39              	 .cfi_def_cfa_offset 24
  40 0004 00AF     	 add r7,sp,#0
  41              	.LCFI2:
  42              	 .cfi_def_cfa_register 7
  43 0006 7860     	 str r0,[r7,#4]
  40:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****     bool ret;
  41:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****     if (gyro->dataReady) {
  44              	 .loc 1 41 0
  45 0008 7B68     	 ldr r3,[r7,#4]
  46 000a 93F85D30 	 ldrb r3,[r3,#93]
  47 000e 002B     	 cmp r3,#0
  48 0010 06D0     	 beq .L2
  42:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****         ret = true;
  49              	 .loc 1 42 0
  50 0012 0123     	 movs r3,#1
  51 0014 FB73     	 strb r3,[r7,#15]
  43:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****         gyro->dataReady= false;
  52              	 .loc 1 43 0
  53 0016 7B68     	 ldr r3,[r7,#4]
  54 0018 0022     	 movs r2,#0
  55 001a 83F85D20 	 strb r2,[r3,#93]
  56 001e 01E0     	 b .L3
  57              	.L2:
  44:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****     } else {
  45:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****         ret = false;
  58              	 .loc 1 45 0
  59 0020 0023     	 movs r3,#0
  60 0022 FB73     	 strb r3,[r7,#15]
  61              	.L3:
  46:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****     }
  47:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****     return ret;
  62              	 .loc 1 47 0
  63 0024 FB7B     	 ldrb r3,[r7,#15]
  48:../cleanflight/src/main/drivers/accgyro/gyro_sync.c **** }
  64              	 .loc 1 48 0
  65 0026 1846     	 mov r0,r3
  66 0028 1437     	 adds r7,r7,#20
  67              	.LCFI3:
  68              	 .cfi_def_cfa_offset 4
  69 002a BD46     	 mov sp,r7
  70              	.LCFI4:
  71              	 .cfi_def_cfa_register 13
  72              	 
  73 002c 5DF8047B 	 ldr r7,[sp],#4
  74              	.LCFI5:
  75              	 .cfi_restore 7
  76              	 .cfi_def_cfa_offset 0
  77 0030 7047     	 bx lr
  78              	 .cfi_endproc
  79              	.LFE533:
  81 0032 00BF     	 .section .text.gyroSetSampleRate,"ax",%progbits
  82              	 .align 2
  83              	 .global gyroSetSampleRate
  84              	 .thumb
  85              	 .thumb_func
  87              	gyroSetSampleRate:
  88              	.LFB534:
  49:../cleanflight/src/main/drivers/accgyro/gyro_sync.c **** 
  50:../cleanflight/src/main/drivers/accgyro/gyro_sync.c **** uint32_t gyroSetSampleRate(gyroDev_t *gyro, uint8_t lpf, uint8_t gyroSyncDenominator, bool gyro_use
  51:../cleanflight/src/main/drivers/accgyro/gyro_sync.c **** {
  89              	 .loc 1 51 0
  90              	 .cfi_startproc
  91              	 
  92              	 
  93              	 
  94 0000 80B4     	 push {r7}
  95              	.LCFI6:
  96              	 .cfi_def_cfa_offset 4
  97              	 .cfi_offset 7,-4
  98 0002 85B0     	 sub sp,sp,#20
  99              	.LCFI7:
 100              	 .cfi_def_cfa_offset 24
 101 0004 00AF     	 add r7,sp,#0
 102              	.LCFI8:
 103              	 .cfi_def_cfa_register 7
 104 0006 7860     	 str r0,[r7,#4]
 105 0008 0846     	 mov r0,r1
 106 000a 1146     	 mov r1,r2
 107 000c 1A46     	 mov r2,r3
 108 000e 0346     	 mov r3,r0
 109 0010 FB70     	 strb r3,[r7,#3]
 110 0012 0B46     	 mov r3,r1
 111 0014 BB70     	 strb r3,[r7,#2]
 112 0016 1346     	 mov r3,r2
 113 0018 7B70     	 strb r3,[r7,#1]
  52:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****     float gyroSamplePeriod;
  53:../cleanflight/src/main/drivers/accgyro/gyro_sync.c **** 
  54:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****     if (lpf == GYRO_HARDWARE_LPF_NORMAL || lpf == GYRO_HARDWARE_LPF_EXPERIMENTAL) {
 114              	 .loc 1 54 0
 115 001a FB78     	 ldrb r3,[r7,#3]
 116 001c 002B     	 cmp r3,#0
 117 001e 02D0     	 beq .L6
 118              	 .loc 1 54 0 is_stmt 0 discriminator 1
 119 0020 FB78     	 ldrb r3,[r7,#3]
 120 0022 012B     	 cmp r3,#1
 121 0024 26D1     	 bne .L7
 122              	.L6:
  55:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****         if (gyro_use_32khz) {
 123              	 .loc 1 55 0 is_stmt 1
 124 0026 7B78     	 ldrb r3,[r7,#1]
 125 0028 002B     	 cmp r3,#0
 126 002a 06D0     	 beq .L8
  56:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****             gyro->gyroRateKHz = GYRO_RATE_32_kHz;
 127              	 .loc 1 56 0
 128 002c 7B68     	 ldr r3,[r7,#4]
 129 002e 0522     	 movs r2,#5
 130 0030 83F85C20 	 strb r2,[r3,#92]
  57:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****             gyroSamplePeriod = 31.25f;
 131              	 .loc 1 57 0
 132 0034 274B     	 ldr r3,.L20
 133 0036 FB60     	 str r3,[r7,#12]
 134 0038 1BE0     	 b .L9
 135              	.L8:
  58:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****         } else {
  59:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****             switch (gyro->mpuDetectionResult.sensor) {
 136              	 .loc 1 59 0
 137 003a 7B68     	 ldr r3,[r7,#4]
 138 003c 93F85930 	 ldrb r3,[r3,#89]
 139 0040 0A2B     	 cmp r3,#10
 140 0042 08D0     	 beq .L11
 141 0044 0C2B     	 cmp r3,#12
 142 0046 0DD1     	 bne .L18
  60:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****             case BMI_160_SPI:
  61:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****                 gyro->gyroRateKHz = GYRO_RATE_3200_Hz;
 143              	 .loc 1 61 0
 144 0048 7B68     	 ldr r3,[r7,#4]
 145 004a 0222     	 movs r2,#2
 146 004c 83F85C20 	 strb r2,[r3,#92]
  62:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****                 gyroSamplePeriod = 312.0f;
 147              	 .loc 1 62 0
 148 0050 214B     	 ldr r3,.L20+4
 149 0052 FB60     	 str r3,[r7,#12]
  63:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****                 break;
 150              	 .loc 1 63 0
 151 0054 0DE0     	 b .L9
 152              	.L11:
  64:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****             case ICM_20649_SPI:
  65:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****                 gyro->gyroRateKHz = GYRO_RATE_9_kHz;
 153              	 .loc 1 65 0
 154 0056 7B68     	 ldr r3,[r7,#4]
 155 0058 0422     	 movs r2,#4
 156 005a 83F85C20 	 strb r2,[r3,#92]
  66:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****                 gyroSamplePeriod = 1000000.0f / 9000.0f;
 157              	 .loc 1 66 0
 158 005e 1F4B     	 ldr r3,.L20+8
 159 0060 FB60     	 str r3,[r7,#12]
  67:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****                 break;
 160              	 .loc 1 67 0
 161 0062 06E0     	 b .L9
 162              	.L18:
  68:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****             default:
  69:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****                 gyro->gyroRateKHz = GYRO_RATE_8_kHz;
 163              	 .loc 1 69 0
 164 0064 7B68     	 ldr r3,[r7,#4]
 165 0066 0322     	 movs r2,#3
 166 0068 83F85C20 	 strb r2,[r3,#92]
  70:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****                 gyroSamplePeriod = 125.0f;
 167              	 .loc 1 70 0
 168 006c 1C4B     	 ldr r3,.L20+12
 169 006e FB60     	 str r3,[r7,#12]
  71:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****                 break;
 170              	 .loc 1 71 0
 171 0070 00BF     	 nop
 172              	.L9:
  55:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****             gyro->gyroRateKHz = GYRO_RATE_32_kHz;
 173              	 .loc 1 55 0
 174 0072 14E0     	 b .L13
 175              	.L7:
  72:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****             }
  73:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****         }
  74:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****     } else {
  75:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****         switch (gyro->mpuDetectionResult.sensor) {
 176              	 .loc 1 75 0
 177 0074 7B68     	 ldr r3,[r7,#4]
 178 0076 93F85930 	 ldrb r3,[r3,#89]
 179 007a 0A2B     	 cmp r3,#10
 180 007c 06D1     	 bne .L19
  76:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****         case ICM_20649_SPI:
  77:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****             gyro->gyroRateKHz = GYRO_RATE_1100_Hz;
 181              	 .loc 1 77 0
 182 007e 7B68     	 ldr r3,[r7,#4]
 183 0080 0122     	 movs r2,#1
 184 0082 83F85C20 	 strb r2,[r3,#92]
  78:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****             gyroSamplePeriod = 1000000.0f / 1100.0f;
 185              	 .loc 1 78 0
 186 0086 174B     	 ldr r3,.L20+16
 187 0088 FB60     	 str r3,[r7,#12]
  79:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****             break;
 188              	 .loc 1 79 0
 189 008a 06E0     	 b .L16
 190              	.L19:
  80:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****         default:
  81:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****             gyro->gyroRateKHz = GYRO_RATE_1_kHz;
 191              	 .loc 1 81 0
 192 008c 7B68     	 ldr r3,[r7,#4]
 193 008e 0022     	 movs r2,#0
 194 0090 83F85C20 	 strb r2,[r3,#92]
  82:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****             gyroSamplePeriod = 1000.0f;
 195              	 .loc 1 82 0
 196 0094 144B     	 ldr r3,.L20+20
 197 0096 FB60     	 str r3,[r7,#12]
  83:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****             break;
 198              	 .loc 1 83 0
 199 0098 00BF     	 nop
 200              	.L16:
  84:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****         }
  85:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****         gyroSyncDenominator = 1; // Always full Sampling 1khz
 201              	 .loc 1 85 0
 202 009a 0123     	 movs r3,#1
 203 009c BB70     	 strb r3,[r7,#2]
 204              	.L13:
  86:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****     }
  87:../cleanflight/src/main/drivers/accgyro/gyro_sync.c **** 
  88:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****     // calculate gyro divider and targetLooptime (expected cycleTime)
  89:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****     gyro->mpuDividerDrops  = gyroSyncDenominator - 1;
 205              	 .loc 1 89 0
 206 009e BB78     	 ldrb r3,[r7,#2]
 207 00a0 013B     	 subs r3,r3,#1
 208 00a2 DAB2     	 uxtb r2,r3
 209 00a4 7B68     	 ldr r3,[r7,#4]
 210 00a6 83F86120 	 strb r2,[r3,#97]
  90:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****     const uint32_t targetLooptime = (uint32_t)(gyroSyncDenominator * gyroSamplePeriod);
 211              	 .loc 1 90 0
 212 00aa BB78     	 ldrb r3,[r7,#2]
 213 00ac 07EE903A 	 fmsr s15,r3
 214 00b0 B8EEE77A 	 fsitos s14,s15
 215 00b4 D7ED037A 	 flds s15,[r7,#12]
 216 00b8 67EE277A 	 fmuls s15,s14,s15
 217 00bc FCEEE77A 	 ftouizs s15,s15
 218 00c0 17EE903A 	 fmrs r3,s15
 219 00c4 BB60     	 str r3,[r7,#8]
  91:../cleanflight/src/main/drivers/accgyro/gyro_sync.c ****     return targetLooptime;
 220              	 .loc 1 91 0
 221 00c6 BB68     	 ldr r3,[r7,#8]
  92:../cleanflight/src/main/drivers/accgyro/gyro_sync.c **** }
 222              	 .loc 1 92 0
 223 00c8 1846     	 mov r0,r3
 224 00ca 1437     	 adds r7,r7,#20
 225              	.LCFI9:
 226              	 .cfi_def_cfa_offset 4
 227 00cc BD46     	 mov sp,r7
 228              	.LCFI10:
 229              	 .cfi_def_cfa_register 13
 230              	 
 231 00ce 5DF8047B 	 ldr r7,[sp],#4
 232              	.LCFI11:
 233              	 .cfi_restore 7
 234              	 .cfi_def_cfa_offset 0
 235 00d2 7047     	 bx lr
 236              	.L21:
 237              	 .align 2
 238              	.L20:
 239 00d4 0000FA41 	 .word 1106903040
 240 00d8 00009C43 	 .word 1134297088
 241 00dc E438DE42 	 .word 1121859812
 242 00e0 0000FA42 	 .word 1123680256
 243 00e4 D1456344 	 .word 1147356625
 244 00e8 00007A44 	 .word 1148846080
 245              	 .cfi_endproc
 246              	.LFE534:
 248              	 .text
 249              	.Letext0:
 250              	 .file 2 "d:\\xmc\\dave-ide-4.4.2-64bit\\eclipse\\arm-gcc-49\\arm-none-eabi\\include\\machine\\_default_types.h"
 251              	 .file 3 "d:\\xmc\\dave-ide-4.4.2-64bit\\eclipse\\arm-gcc-49\\arm-none-eabi\\include\\stdint.h"
 252              	 .file 4 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/lib/main/XMC4000/xmc4700.h"
 253              	 .file 5 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/src/main/platform.h"
 254              	 .file 6 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/src/main/drivers/sensor.h"
 255              	 .file 7 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/src/main/drivers/accgyro/accgyro.h"
 256              	 .file 8 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/src/main/drivers/io_types.h"
 257              	 .file 9 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/src/main/drivers/exti.h"
 258              	 .file 10 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/src/main/drivers/bus_i2c.h"
 259              	 .file 11 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/src/main/drivers/bus.h"
 260              	 .file 12 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/src/main/drivers/accgyro/accgyro_mpu.h"
 261              	 .file 13 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/src/main/common/time.h"
 262              	 .file 14 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/src/main/sensors/gyro.h"
 263              	 .file 15 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/lib/main/CMSIS/Core/Include/core_cm4.h"
 264              	 .file 16 "D:/XMC/Projekte/Temp/CF_XMC4700/cleanflight/lib/main/XMC4000/system_XMC4700.h"
DEFINED SYMBOLS
                            *ABS*:00000000 gyro_sync.c
    {standard input}:20     .text.gyroSyncCheckUpdate:00000000 $t
    {standard input}:25     .text.gyroSyncCheckUpdate:00000000 gyroSyncCheckUpdate
    {standard input}:82     .text.gyroSetSampleRate:00000000 $t
    {standard input}:87     .text.gyroSetSampleRate:00000000 gyroSetSampleRate
    {standard input}:239    .text.gyroSetSampleRate:000000d4 $d
                     .debug_frame:00000010 $d

NO UNDEFINED SYMBOLS
